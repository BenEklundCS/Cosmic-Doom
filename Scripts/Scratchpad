namespace fps.scripts;
using Godot;
using static Godot.GD;
using System;
	
[Tool]
public partial class PlayerWrapper : Node {
	[Export] public CharacterBody3D WrappedNode;

	private Timer _timer;
    
	public override void _Ready() {
		_timer = GetNode<Timer>("Timer");
		_timer.Timeout += OnTimerTimeout;
        SyncExportsToWrapped();
	}

    public override void _EnterTree()
    {
        if (!Engine.IsEditorHint())
            return;
        PullDefaultsFromWrapped();
    }

    public override void _Process(double delta) {
		Print(this.SPEED);
	}

	private void OnTimerTimeout() {
		SPEED += 1.0f;
	}
	
	[Export] private bool _OVERRIDE_CAPTURE_ON_START;
    [Export] private bool _CAPTURE_ON_START;
    public bool CAPTURE_ON_START
    {
        get => _OVERRIDE_CAPTURE_ON_START
            ? _CAPTURE_ON_START
            : (bool)WrappedNode.Get("CAPTURE_ON_START");
        set
        {
            _OVERRIDE_CAPTURE_ON_START = true;
            _CAPTURE_ON_START = value;
        }
    }
    [Export] private bool _OVERRIDE_SPEED;
    [Export] private float _SPEED;
    public float SPEED
    {
        get => _OVERRIDE_SPEED
            ? _SPEED
            : (float)WrappedNode.Get("SPEED");
        set
        {
            _OVERRIDE_SPEED = true;
            _SPEED = value;
        }
    }
    [Export] private bool _OVERRIDE_ACCEL;
    [Export] private float _ACCEL;
    public float ACCEL
    {
        get => _OVERRIDE_ACCEL
            ? _ACCEL
            : (float)WrappedNode.Get("ACCEL");
        set
        {
            _OVERRIDE_ACCEL = true;
            _ACCEL = value;
        }
    }
    [Export] private bool _OVERRIDE_IN_AIR_SPEED;
    [Export] private float _IN_AIR_SPEED;
    public float IN_AIR_SPEED
    {
        get => _OVERRIDE_IN_AIR_SPEED
            ? _IN_AIR_SPEED
            : (float)WrappedNode.Get("IN_AIR_SPEED");
        set
        {
            _OVERRIDE_IN_AIR_SPEED = true;
            _IN_AIR_SPEED = value;
        }
    }
    [Export] private bool _OVERRIDE_IN_AIR_ACCEL;
    [Export] private float _IN_AIR_ACCEL;
    public float IN_AIR_ACCEL
    {
        get => _OVERRIDE_IN_AIR_ACCEL
            ? _IN_AIR_ACCEL
            : (float)WrappedNode.Get("IN_AIR_ACCEL");
        set
        {
            _OVERRIDE_IN_AIR_ACCEL = true;
            _IN_AIR_ACCEL = value;
        }
    }
    [Export] private bool _OVERRIDE_JUMP_VELOCITY;
    [Export] private float _JUMP_VELOCITY;
    public float JUMP_VELOCITY
    {
        get => _OVERRIDE_JUMP_VELOCITY
            ? _JUMP_VELOCITY
            : (float)WrappedNode.Get("JUMP_VELOCITY");
        set
        {
            _OVERRIDE_JUMP_VELOCITY = true;
            _JUMP_VELOCITY = value;
        }
    }
    [Export] private bool _OVERRIDE_HEAD_BOB;
    [Export] private bool _HEAD_BOB;
    public bool HEAD_BOB
    {
        get => _OVERRIDE_HEAD_BOB
            ? _HEAD_BOB
            : (bool)WrappedNode.Get("HEAD_BOB");
        set
        {
            _OVERRIDE_HEAD_BOB = true;
            _HEAD_BOB = value;
        }
    }
    [Export] private bool _OVERRIDE_HEAD_BOB_FREQUENCY;
    [Export] private float _HEAD_BOB_FREQUENCY;
    public float HEAD_BOB_FREQUENCY
    {
        get => _OVERRIDE_HEAD_BOB_FREQUENCY
            ? _HEAD_BOB_FREQUENCY
            : (float)WrappedNode.Get("HEAD_BOB_FREQUENCY");
        set
        {
            _OVERRIDE_HEAD_BOB_FREQUENCY = true;
            _HEAD_BOB_FREQUENCY = value;
        }
    }
    [Export] private bool _OVERRIDE_HEAD_BOB_AMPLITUDE;
    [Export] private float _HEAD_BOB_AMPLITUDE;
    public float HEAD_BOB_AMPLITUDE
    {
        get => _OVERRIDE_HEAD_BOB_AMPLITUDE
            ? _HEAD_BOB_AMPLITUDE
            : (float)WrappedNode.Get("HEAD_BOB_AMPLITUDE");
        set
        {
            _OVERRIDE_HEAD_BOB_AMPLITUDE = true;
            _HEAD_BOB_AMPLITUDE = value;
        }
    }
    [Export] private bool _OVERRIDE_CLAMP_HEAD_ROTATION;
    [Export] private bool _CLAMP_HEAD_ROTATION;
    public bool CLAMP_HEAD_ROTATION
    {
        get => _OVERRIDE_CLAMP_HEAD_ROTATION
            ? _CLAMP_HEAD_ROTATION
            : (bool)WrappedNode.Get("CLAMP_HEAD_ROTATION");
        set
        {
            _OVERRIDE_CLAMP_HEAD_ROTATION = true;
            _CLAMP_HEAD_ROTATION = value;
        }
    }
    [Export] private bool _OVERRIDE_CLAMP_HEAD_ROTATION_MIN;
    [Export] private float _CLAMP_HEAD_ROTATION_MIN;
    public float CLAMP_HEAD_ROTATION_MIN
    {
        get => _OVERRIDE_CLAMP_HEAD_ROTATION_MIN
            ? _CLAMP_HEAD_ROTATION_MIN
            : (float)WrappedNode.Get("CLAMP_HEAD_ROTATION_MIN");
        set
        {
            _OVERRIDE_CLAMP_HEAD_ROTATION_MIN = true;
            _CLAMP_HEAD_ROTATION_MIN = value;
        }
    }
    [Export] private bool _OVERRIDE_CLAMP_HEAD_ROTATION_MAX;
    [Export] private float _CLAMP_HEAD_ROTATION_MAX;
    public float CLAMP_HEAD_ROTATION_MAX
    {
        get => _OVERRIDE_CLAMP_HEAD_ROTATION_MAX
            ? _CLAMP_HEAD_ROTATION_MAX
            : (float)WrappedNode.Get("CLAMP_HEAD_ROTATION_MAX");
        set
        {
            _OVERRIDE_CLAMP_HEAD_ROTATION_MAX = true;
            _CLAMP_HEAD_ROTATION_MAX = value;
        }
    }
    [Export] private bool _OVERRIDE_MOUSE_ACCEL;
    [Export] private bool _MOUSE_ACCEL;
    public bool MOUSE_ACCEL
    {
        get => _OVERRIDE_MOUSE_ACCEL
            ? _MOUSE_ACCEL
            : (bool)WrappedNode.Get("MOUSE_ACCEL");
        set
        {
            _OVERRIDE_MOUSE_ACCEL = true;
            _MOUSE_ACCEL = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_MOUSE_SENS;
    [Export] private float _KEY_BIND_MOUSE_SENS;
    public float KEY_BIND_MOUSE_SENS
    {
        get => _OVERRIDE_KEY_BIND_MOUSE_SENS
            ? _KEY_BIND_MOUSE_SENS
            : (float)WrappedNode.Get("KEY_BIND_MOUSE_SENS");
        set
        {
            _OVERRIDE_KEY_BIND_MOUSE_SENS = true;
            _KEY_BIND_MOUSE_SENS = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_MOUSE_ACCEL;
    [Export] private float _KEY_BIND_MOUSE_ACCEL;
    public float KEY_BIND_MOUSE_ACCEL
    {
        get => _OVERRIDE_KEY_BIND_MOUSE_ACCEL
            ? _KEY_BIND_MOUSE_ACCEL
            : (float)WrappedNode.Get("KEY_BIND_MOUSE_ACCEL");
        set
        {
            _OVERRIDE_KEY_BIND_MOUSE_ACCEL = true;
            _KEY_BIND_MOUSE_ACCEL = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_UP;
    [Export] private string _KEY_BIND_UP;
    public string KEY_BIND_UP
    {
        get => _OVERRIDE_KEY_BIND_UP
            ? _KEY_BIND_UP
            : (string)WrappedNode.Get("KEY_BIND_UP");
        set
        {
            _OVERRIDE_KEY_BIND_UP = true;
            _KEY_BIND_UP = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_LEFT;
    [Export] private string _KEY_BIND_LEFT;
    public string KEY_BIND_LEFT
    {
        get => _OVERRIDE_KEY_BIND_LEFT
            ? _KEY_BIND_LEFT
            : (string)WrappedNode.Get("KEY_BIND_LEFT");
        set
        {
            _OVERRIDE_KEY_BIND_LEFT = true;
            _KEY_BIND_LEFT = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_RIGHT;
    [Export] private string _KEY_BIND_RIGHT;
    public string KEY_BIND_RIGHT
    {
        get => _OVERRIDE_KEY_BIND_RIGHT
            ? _KEY_BIND_RIGHT
            : (string)WrappedNode.Get("KEY_BIND_RIGHT");
        set
        {
            _OVERRIDE_KEY_BIND_RIGHT = true;
            _KEY_BIND_RIGHT = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_DOWN;
    [Export] private string _KEY_BIND_DOWN;
    public string KEY_BIND_DOWN
    {
        get => _OVERRIDE_KEY_BIND_DOWN
            ? _KEY_BIND_DOWN
            : (string)WrappedNode.Get("KEY_BIND_DOWN");
        set
        {
            _OVERRIDE_KEY_BIND_DOWN = true;
            _KEY_BIND_DOWN = value;
        }
    }
    [Export] private bool _OVERRIDE_KEY_BIND_JUMP;
    [Export] private string _KEY_BIND_JUMP;
    public string KEY_BIND_JUMP
    {
        get => _OVERRIDE_KEY_BIND_JUMP
            ? _KEY_BIND_JUMP
            : (string)WrappedNode.Get("KEY_BIND_JUMP");
        set
        {
            _OVERRIDE_KEY_BIND_JUMP = true;
            _KEY_BIND_JUMP = value;
        }
    }
    [Export] private bool _OVERRIDE_UPDATE_PLAYER_ON_PHYS_STEP;
    [Export] private bool _UPDATE_PLAYER_ON_PHYS_STEP;
    public bool UPDATE_PLAYER_ON_PHYS_STEP
    {
        get => _OVERRIDE_UPDATE_PLAYER_ON_PHYS_STEP
            ? _UPDATE_PLAYER_ON_PHYS_STEP
            : (bool)WrappedNode.Get("UPDATE_PLAYER_ON_PHYS_STEP");
        set
        {
            _OVERRIDE_UPDATE_PLAYER_ON_PHYS_STEP = true;
            _UPDATE_PLAYER_ON_PHYS_STEP = value;
        }
    }

    private void PullDefaultsFromWrapped()
    {
        if (WrappedNode == null)
            return;

        if (!_OVERRIDE_CAPTURE_ON_START) _CAPTURE_ON_START = (bool)WrappedNode.Get("CAPTURE_ON_START");
        if (!_OVERRIDE_SPEED) _SPEED = (float)WrappedNode.Get("SPEED");
        if (!_OVERRIDE_ACCEL) _ACCEL = (float)WrappedNode.Get("ACCEL");
        if (!_OVERRIDE_IN_AIR_SPEED) _IN_AIR_SPEED = (float)WrappedNode.Get("IN_AIR_SPEED");
        if (!_OVERRIDE_IN_AIR_ACCEL) _IN_AIR_ACCEL = (float)WrappedNode.Get("IN_AIR_ACCEL");
        if (!_OVERRIDE_JUMP_VELOCITY) _JUMP_VELOCITY = (float)WrappedNode.Get("JUMP_VELOCITY");
        if (!_OVERRIDE_HEAD_BOB) _HEAD_BOB = (bool)WrappedNode.Get("HEAD_BOB");
        if (!_OVERRIDE_HEAD_BOB_FREQUENCY) _HEAD_BOB_FREQUENCY = (float)WrappedNode.Get("HEAD_BOB_FREQUENCY");
        if (!_OVERRIDE_HEAD_BOB_AMPLITUDE) _HEAD_BOB_AMPLITUDE = (float)WrappedNode.Get("HEAD_BOB_AMPLITUDE");
        if (!_OVERRIDE_CLAMP_HEAD_ROTATION) _CLAMP_HEAD_ROTATION = (bool)WrappedNode.Get("CLAMP_HEAD_ROTATION");
        if (!_OVERRIDE_CLAMP_HEAD_ROTATION_MIN) _CLAMP_HEAD_ROTATION_MIN = (float)WrappedNode.Get("CLAMP_HEAD_ROTATION_MIN");
        if (!_OVERRIDE_CLAMP_HEAD_ROTATION_MAX) _CLAMP_HEAD_ROTATION_MAX = (float)WrappedNode.Get("CLAMP_HEAD_ROTATION_MAX");
        if (!_OVERRIDE_MOUSE_ACCEL) _MOUSE_ACCEL = (bool)WrappedNode.Get("MOUSE_ACCEL");
        if (!_OVERRIDE_KEY_BIND_MOUSE_SENS) _KEY_BIND_MOUSE_SENS = (float)WrappedNode.Get("KEY_BIND_MOUSE_SENS");
        if (!_OVERRIDE_KEY_BIND_MOUSE_ACCEL) _KEY_BIND_MOUSE_ACCEL = (float)WrappedNode.Get("KEY_BIND_MOUSE_ACCEL");
        if (!_OVERRIDE_KEY_BIND_UP) _KEY_BIND_UP = (string)WrappedNode.Get("KEY_BIND_UP");
        if (!_OVERRIDE_KEY_BIND_LEFT) _KEY_BIND_LEFT = (string)WrappedNode.Get("KEY_BIND_LEFT");
        if (!_OVERRIDE_KEY_BIND_RIGHT) _KEY_BIND_RIGHT = (string)WrappedNode.Get("KEY_BIND_RIGHT");
        if (!_OVERRIDE_KEY_BIND_DOWN) _KEY_BIND_DOWN = (string)WrappedNode.Get("KEY_BIND_DOWN");
        if (!_OVERRIDE_KEY_BIND_JUMP) _KEY_BIND_JUMP = (string)WrappedNode.Get("KEY_BIND_JUMP");
        if (!_OVERRIDE_UPDATE_PLAYER_ON_PHYS_STEP) _UPDATE_PLAYER_ON_PHYS_STEP = (bool)WrappedNode.Get("UPDATE_PLAYER_ON_PHYS_STEP");
    }

    private void SyncExportsToWrapped()
    {
        if (_OVERRIDE_CAPTURE_ON_START) WrappedNode.Set("CAPTURE_ON_START", _CAPTURE_ON_START);
        if (_OVERRIDE_SPEED) WrappedNode.Set("SPEED", _SPEED);
        if (_OVERRIDE_ACCEL) WrappedNode.Set("ACCEL", _ACCEL);
        if (_OVERRIDE_IN_AIR_SPEED) WrappedNode.Set("IN_AIR_SPEED", _IN_AIR_SPEED);
        if (_OVERRIDE_IN_AIR_ACCEL) WrappedNode.Set("IN_AIR_ACCEL", _IN_AIR_ACCEL);
        if (_OVERRIDE_JUMP_VELOCITY) WrappedNode.Set("JUMP_VELOCITY", _JUMP_VELOCITY);
        if (_OVERRIDE_HEAD_BOB) WrappedNode.Set("HEAD_BOB", _HEAD_BOB);
        if (_OVERRIDE_HEAD_BOB_FREQUENCY) WrappedNode.Set("HEAD_BOB_FREQUENCY", _HEAD_BOB_FREQUENCY);
        if (_OVERRIDE_HEAD_BOB_AMPLITUDE) WrappedNode.Set("HEAD_BOB_AMPLITUDE", _HEAD_BOB_AMPLITUDE);
        if (_OVERRIDE_CLAMP_HEAD_ROTATION) WrappedNode.Set("CLAMP_HEAD_ROTATION", _CLAMP_HEAD_ROTATION);
        if (_OVERRIDE_CLAMP_HEAD_ROTATION_MIN) WrappedNode.Set("CLAMP_HEAD_ROTATION_MIN", _CLAMP_HEAD_ROTATION_MIN);
        if (_OVERRIDE_CLAMP_HEAD_ROTATION_MAX) WrappedNode.Set("CLAMP_HEAD_ROTATION_MAX", _CLAMP_HEAD_ROTATION_MAX);
        if (_OVERRIDE_MOUSE_ACCEL) WrappedNode.Set("MOUSE_ACCEL", _MOUSE_ACCEL);
        if (_OVERRIDE_KEY_BIND_MOUSE_SENS) WrappedNode.Set("KEY_BIND_MOUSE_SENS", _KEY_BIND_MOUSE_SENS);
        if (_OVERRIDE_KEY_BIND_MOUSE_ACCEL) WrappedNode.Set("KEY_BIND_MOUSE_ACCEL", _KEY_BIND_MOUSE_ACCEL);
        if (_OVERRIDE_KEY_BIND_UP) WrappedNode.Set("KEY_BIND_UP", _KEY_BIND_UP);
        if (_OVERRIDE_KEY_BIND_LEFT) WrappedNode.Set("KEY_BIND_LEFT", _KEY_BIND_LEFT);
        if (_OVERRIDE_KEY_BIND_RIGHT) WrappedNode.Set("KEY_BIND_RIGHT", _KEY_BIND_RIGHT);
        if (_OVERRIDE_KEY_BIND_DOWN) WrappedNode.Set("KEY_BIND_DOWN", _KEY_BIND_DOWN);
        if (_OVERRIDE_KEY_BIND_JUMP) WrappedNode.Set("KEY_BIND_JUMP", _KEY_BIND_JUMP);
        if (_OVERRIDE_UPDATE_PLAYER_ON_PHYS_STEP) WrappedNode.Set("UPDATE_PLAYER_ON_PHYS_STEP", _UPDATE_PLAYER_ON_PHYS_STEP);
    }
}
	
